
### Who should read this document?

This guide is written for merchants who have signed up through PayOne Payment Gateway system to use it as their e-Payment processor and EZ-Connect Interface as their integration point for handling electronic transactions (payment, refund, confirm.. etc.) and from different payment methods (credit card, debit card...etc.), by using the HTTPS Post as programming interface to perform the transactions. In particular, it describes the format for sending transactions and the corresponding received responses.

### Merchant’s admin/developer must make sure to:
* Store the Secret Key in a secure place as a secure database or file.
* Change the Secret Key periodically according to the Merchant Organization’s Security
policies.
* Not store the Secret Key within the source code of an ASP, JSP or any web page standing the
chance of being accessed or viewed via web.

### Communication Model

**Redirection communication model:** in this model Merchant site issues Http redirection command to customer (card holder) browser; customer gets redirected to PG system payment site where the customer is requested to provide some input to complete the cycle. After conducting the payment, the PG system redirects the customer back to the merchant site based on a predefined merchant’s URL.

### Request Flow
* Merchant prepares request message which includes request’s fields based on the message type or action (i.e. Pay-Web, Refund ... etc.)
* Merchant generates Secure Hash using request parameters and Secret Key value
* Merchant sends request and Secure Hash to PG.
* PG System upon receiving the request will retrieve Secret Key value stored for this merchant at PG side.
* PG System regenerates Secure Hash using received request parameters and merchant Secret Key stored at PG System.
* PG compares generated Secure Hash with received Secure Hash, if values mismatch, request will be rejected. Else PG will continue processing request.

### Request Fields: Basic Fields

#### Action
Alphanumeric value representing the action to be called 0 for Pay Web.

#### BankID
Alphanumeric value representing the Payment Gateway ID, this value is provided by
Payment Gateway operation team upon merchant enrollment.

#### MerchantID
Alphanumeric value representing the Payment Gateway ID, this value is provided by
Payment Gateway operation team upon merchant enrollment.

#### CurrencyCode
The numeric ISO Code for the currency and not the character value.
e.g.
840 for US Dollar
634 for QAR

#### Amount
A numeric value containing the Item purchase amount ISO Formatted with no decimal point. e.g.
* 100 for 1.00 USD
* 150 for 1.50 QAR

#### PUN
Payment Unique Number- PUN is the unique number of the payment order (transaction) generated by the Merchant, it represent a unique identifier for the transaction. It can’t include special characters neither spaces.

#### PaymentDescription
Alphanumeric string containing a narrative description of the payment order using the language specified in the language parameter. This value should be UTF-8 URL encoded.

#### MerchantModuleSessionID
Alphanumeric value representing the merchant web session id initiating the payment request.

#### TransactionRequestDate
Alphanumeric value representing the request date time stamp formatted as the following (ddMMyyyyHHmmss) e.g.
* For date-time 18-Aug-2015 at 13:00:40 TransactionRequestDate should be 18082015130040
Check Appendix A: Date Format for descriptive details about the date format.

#### Quantity
A numeric value greater than ZERO represents the quantity of purchased Item

#### ExtraFields_f14
Merchant site response page URL that will receive the response from PG, this can help merchant having different response pages based on the requested service or any other criteria

#### SecureHash
Alphanumeric value representing generated hex-encoded hash using hashing algorithm SHA-2 (256), by concatenating parameters as a single string starting with the merchant’s secret key, then all parameters (required parameters and optional parameters if they are provided) ordered alphabetically by parameter’s name should be part of the secure hash, with no separators and no terminating character. Please refer to Appendix D: Secure Hash – Pay-Web Action for more details about secure hash generation.